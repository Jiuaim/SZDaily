# references:
# * https://www.objc.io/issues/6-build-tools/travis-ci/
# * https://github.com/supermarin/xcpretty#usage

osx_image: xcode7.3
language: objective-c
 cache: cocoapods
 podfile: Example/Podfile
 
 env:
 global:
   - LANG=en_US.UTF-8
   - LC_ALL=en_US.UTF-8
   # 项目路径
   - XCODE_WORKSPACE=Example/SZDaily.xcworkspace
 matrix:
   # 项目名
   - SCHEME="SZDaily-Example"
   
 before_install:
 - gem install cocoapods # Since Travis is not always on latest version
 - pod repo update
 - pod install --project-directory=Example
 
script:
#- set -o pipefail && xcodebuild test -enableCodeCoverage YES -workspace Example/SZDaily.xcworkspace -scheme SZDaily-Example -sdk iphonesimulator9.3 ONLY_ACTIVE_ARCH=NO | xcpretty
#- pod lib lint
  - set -o pipefail
  - xcodebuild -workspace "$XCODE_WORKSPACE" -scheme "$SCHEME" -configuration Debug clean build CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO | xcpretty -c
  - xcodebuild -workspace "$XCODE_WORKSPACE" -scheme "$SCHEME" -configuration Release clean build CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO | xcpretty -c
  - pod lib lint --allow-warnings


#osx_image: xcode9
## objective-c/swift 都采用 objective-c 配置
#language: objective-c
#
#cache: cocoapods
#podfile: Example/Podfile
#
#env:
#  global:
#    - LANG=en_US.UTF-8
#    - LC_ALL=en_US.UTF-8
#    # 项目路径
#    - XCODE_WORKSPACE=Example/Routable.xcworkspace
#  matrix:
#    # 项目名
#    - SCHEME="Routable-Example"
#
#before_install:
#  - gem install xcpretty --no-rdoc --no-ri --no-document --quiet
#  - gem install cocoapods --pre --no-rdoc --no-ri --no-document --quiet
#    # 如果依赖其他库,最好加上
#  - pod repo update
#  - pod install --project-directory=Example
#
#script:
#  - set -o pipefail
#  - xcodebuild -workspace "$XCODE_WORKSPACE" -scheme "$SCHEME" -configuration Debug clean build CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO | xcpretty -c
#  - xcodebuild -workspace "$XCODE_WORKSPACE" -scheme "$SCHEME" -configuration Release clean build CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO | xcpretty -c
#  - pod lib lint --allow-warnings
#
#after_success:
#  - sleep 3
